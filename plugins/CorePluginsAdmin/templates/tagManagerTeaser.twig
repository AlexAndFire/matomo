{% extends 'dashboard.twig' %}

{% block topcontrols %}
{% endblock %}

{% block content %}
<div class="activateTagManager">
    <div class="row">
        <div class="col s12" style="text-align: center;">
            <h2>Matomo Tag Manager is now available</h2>
            <p>Manage all your tags easily through one platform to get the insights you want, the opportunities are endless!</p>
        </div>
    </div>
    {% set actionBlock %}
    <div class="row">
        <div class="col s12">
            <div style="text-align: center;">
                {% if isSuperUser %}
                    <a href="{{ linkTo({'module': 'CorePluginsAdmin', 'action': 'activate', 'nonce': nonce, 'pluginName': 'TagManager', 'redirectTo': 'tagmanager'}) }}"
                       class="btn activateTagManagerPlugin"><span class="icon-rocket"></span> Activate Tag Manager now <span class="icon-rocket"></span></a>
                {% else %}
                    <a href="mailto:{{ superUserEmails }}?subject={{ 'Matomo Tag Manager activation'|e('url') }}&body={{ "Hi,\n\nMatomo Tag Manager is now available within Matomo and I would love to use this new feature. As you have Super User access, could you activate this feature through the Tag Manager page in the top menu?\nThe Matomo URL is " ~ piwikUrl ~ ".\n\nThanks"|e('url') }}"
                       class="btn activateTagManagerPlugin"><span class="icon-rocket"></span> Email Super Users to activate this new feature <span class="icon-rocket"></span></a>
                {% endif %}

                <a href="{{ linkTo({'module': 'CorePluginsAdmin', 'action': 'disableActivateTagManagerPage'}) }}"
                   class="btn dontShowAgainBtn"><span class="icon-hide"></span>
                    {% if isSuperUser %}Do not show this page to any user{% else %}Not interested, do not show this page again{% endif %}
                </a>
            </div>
        </div>
    </div>
    {% endset %}
    {{ actionBlock|raw }}
    <div class="row">
        <div class="col {% if isSuperUser %}l4{% endif %} m6 s12">
            <div piwik-content-block content-title="What is a Tag Manager?">
                <p>
                    Similar to how a Content Management System (CMS) brings you all the flexibility to publish content for your website without having the technical knowledge, a Tag Management System (TMS) will allow you to easily embed first and third-party application resources into your website.
                    <br /><br />
                    Matomo Tag Manager lets you manage and unify all your tracking and marketing tags (also known as snippets or pixels).
                    Tags let you integrate various features into your site in just a few clicks, for example:
                    <br />
                    Tracking analytics data, Conversion Tracking, Newsletter signups, Exit popups and surveys, Remarketing, Social widgets, Ads, and more.
                    <br /><br />
                    <a href="https://matomo.org/docs/tag-manager" rel="noreferrer noopener">Learn more in the Tag Manager User Guide</a>
                </p>
            </div>
        </div>
        <div class="col {% if isSuperUser %}l4{% endif %} m6 s12">
            <div piwik-content-block content-title="Why a Tag Manager?">
                <p>
                    A Tag Manager makes your life easier when you want to modify any first or third-party snippets on your website
                    as you will no longer need a developer to make the needed changes for you. Instead of waiting for
                    someone to make these changes and to deploy your website, you can now easily make the needed changes yourself.
                    It couldn't be more convenient and it not only lets you bring changes to the market faster, but also reduces cost.
                    <br /><br />
                    This keeps the marketing teams, digital teams and the IT guys happy... Itâ€™s a win win for everyone!
                    <br /><br />
                    <a href="https://matomo.org/docs/tag-manager" rel="noreferrer noopener">Learn more in the Tag Manager User Guide</a>
                </p>
            </div>
        </div>
        {% if isSuperUser %}
            <div class="col l4 m6 s12">
                <div piwik-content-block content-title="Are there any risks?">
                    When you activate the Tag Manager, users with admin access will be able to create
                    custom HTML tags, triggers, and variables that may execute JavaScript on your website.
                    These custom templates could be misused to steal for example sensitive information from your website visitors
                    (known as <a href="https://en.wikipedia.org/wiki/Cross-site_scripting">XSS</a>).
                    <br /><br />

                    You can disable these custom templates under "Administration => General Settings" once you have activated
                    the Tag Manager. Alternatively, you can also restrict the usage of these templates to only specific users
                    or to super users only.
                    <br /><br />
                    <a href="https://matomo.org/docs/tag-manager" rel="noreferrer noopener">Learn more in the Tag Manager User Guide</a>
                </div>
            </div>
        {% endif %}
    </div>
    {{ actionBlock|raw }}
</div>
{% endblock %}
